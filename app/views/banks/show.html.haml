.row
  .mainbox.col-md-6.col-md-offset-3{:style => "margin-top:50px"}
    .panel.panel-primary
      .panel-heading
        %h3.panel-title Info
        %div{:style => "float:right; font-size: 85%; position: relative; top:-20px"}
          = link_to 'Delete', @bank, :method => :delete, :data => { :confirm => "Delete #{@bank.name}, Are you sure?" }, :class => "btn btn-danger btn-xs"
      .panel-body
        = form_for @bank, html: {role: 'form', class: 'form-horizontal'} do |f|
          - if @bank.errors.any?
            #error_explanation
              %h2
                = pluralize(@bank.errors.count, "error")
                prohibited this bank from being saved:
              %ul
                - @bank.errors.full_messages.each do |message|
                  %li= message
          .form-group
            %label.col-md-3.control-label{:for => "bank_name"} Name
            .col-md-9
              = f.text_field :name, class: 'form-control'
          .form-group
            %label.col-md-3.control-label{:for => "bank_balance"} Balance
            .col-md-9
              = f.text_field :balance, class: 'form-control'
          .form-group
            %label.col-md-3.control-label{:for => "account_color"} Color
            .col-md-9
              = f.text_field :color, class: 'minicolors form-control', :style => "height:34px;"
          .form-group
            .col-md-offset-3.col-md-9
              %button.btn.btn-success.btn-md.btn-group{:type => "submit"} Update

.row
  .col-md-10.col-md-offset-1{:style => "margin-top:50px"}
    .panel.panel-primary
      .panel-heading
        .panel-title Transactions
        %div{:style => "float:right; font-size: 85%; position: relative; top:-20px"}
          %button.btn.btn-info.btn-xs#new-exception-button{:type => "button"} Add Transaction
          %button.btn.btn-info.btn-xs#readjustment-button{:type => "button"} Change Balance
      #new-exception-form{style:'display:none;'}
        = render 'transactions/form', bank: @bank, bill: nil
      #readjustment-form{style:'display:none;'}
        = render 'transactions/readjustment', bank: @bank, bill: nil
      .panel-body
        %div.table-responsive
          %table.table.table-condensed.table-hover
            %thead
              %tr
                %th Date
                %th Description
                %th Amount
                %th Belongs to
            %tbody
              - @transactions.each do |transaction|
                %tr
                  %td= best_in_place transaction, :date, as: :input, :display_with => lambda { |v| v.to_date }
                  %td= best_in_place transaction, :summary, as: :input
                  %td= best_in_place transaction, :amount, as: :input
                  %td= transaction.bill_summary
                  %td
                    =link_to 'Destroy', transaction, :method => :delete, data: { confirm: "Deleting transaction '#{transaction.summary}', Are you sure?" }, remote: true, :class => "btn btn-danger btn-xs pull-right"

:javascript
  $(document).ready(function(){
    $('#new-exception-button').click(function(){
      $button = $('#new-exception-button')
      $form = $('#new-exception-form')
      $form.toggle();
      $('#readjustment-button').toggle();
      if ($form.is(":visible") ){
        $button.html("Cancel")
      } else {
        $button.html("Add Transaction")
      }
    });
    $('#readjustment-button').click(function(){
      $button = $('#readjustment-button')
      $form = $('#readjustment-form')
      $form.toggle();
      $('#new-exception-button').toggle();
      if ($form.is(":visible") ){
        $button.html("Cancel")
      } else {
        $button.html("Change Balance")
      }
    });
  });